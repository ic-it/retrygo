<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# retrygo

```go
import "github.com/ic-it/retrygo"
```

## Index

- [type ErrRecovered](<#ErrRecovered>)
  - [func \(e ErrRecovered\) Error\(\) string](<#ErrRecovered.Error>)
- [type Retry](<#Retry>)
  - [func New\[T any\]\(policy RetryPolicy, options ...RetryOption\[T\]\) \(Retry\[T\], error\)](<#New>)
  - [func NewZero\(policy RetryPolicy, options ...RetryOption\[zero\]\) \(Retry\[zero\], error\)](<#NewZero>)
  - [func \(r Retry\[T\]\) Do\(ctx context.Context, f func\(context.Context\) \(T, error\)\) \(T, error\)](<#Retry[T].Do>)
  - [func \(r Retry\[T\]\) DoZero\(ctx context.Context, f func\(context.Context\) error\) error](<#Retry[T].DoZero>)
- [type RetryInfo](<#RetryInfo>)
- [type RetryOption](<#RetryOption>)
  - [func WithRecovery\[T any\]\(\) RetryOption\[T\]](<#WithRecovery>)
- [type RetryPolicy](<#RetryPolicy>)
  - [func Combine\(policies ...RetryPolicy\) RetryPolicy](<#Combine>)
  - [func Constant\(interval time.Duration\) RetryPolicy](<#Constant>)
  - [func Exponential\(interval time.Duration\) RetryPolicy](<#Exponential>)
  - [func Jitter\(interval time.Duration\) RetryPolicy](<#Jitter>)
  - [func LimitCount\(count int\) RetryPolicy](<#LimitCount>)
  - [func LimitTime\(limit time.Duration\) RetryPolicy](<#LimitTime>)
  - [func Linear\(interval time.Duration\) RetryPolicy](<#Linear>)


<a name="ErrRecovered"></a>
## type ErrRecovered

ErrRecovered is returned when a panic is recovered.

```go
type ErrRecovered struct{ V any }
```

<a name="ErrRecovered.Error"></a>
### func \(ErrRecovered\) Error

```go
func (e ErrRecovered) Error() string
```



<a name="Retry"></a>
## type Retry

Retry is the main type of this package.

```go
type Retry[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func New

```go
func New[T any](policy RetryPolicy, options ...RetryOption[T]) (Retry[T], error)
```

New creates a new Retry instance with the given RetryPolicy and RetryOptions.

<a name="NewZero"></a>
### func NewZero

```go
func NewZero(policy RetryPolicy, options ...RetryOption[zero]) (Retry[zero], error)
```

NewZero creates a new Retry instance with no return value.

<a name="Retry[T].Do"></a>
### func \(Retry\[T\]\) Do

```go
func (r Retry[T]) Do(ctx context.Context, f func(context.Context) (T, error)) (T, error)
```

Do calls the given function f until it returns nil error or the context is done.

<a name="Retry[T].DoZero"></a>
### func \(Retry\[T\]\) DoZero

```go
func (r Retry[T]) DoZero(ctx context.Context, f func(context.Context) error) error
```

DoZero calls the given function f until it returns nil error or the context is done.

<a name="RetryInfo"></a>
## type RetryInfo

RetryInfo contains information about the retry

```go
type RetryInfo struct {
    Fails int       // Fails is the number of retries
    Err   error     // Err is the error returned by the function
    Since time.Time // Since is the time when the retry started
}
```

<a name="RetryOption"></a>
## type RetryOption

type RetryOption\[T any\] func\(\*Retry\[T\]\)

```go
type RetryOption[T any] interface {
    // contains filtered or unexported methods
}
```

<a name="WithRecovery"></a>
### func WithRecovery

```go
func WithRecovery[T any]() RetryOption[T]
```

WithRecovery enables the recovery mode.

<a name="RetryPolicy"></a>
## type RetryPolicy

RetryPolicy is a function that returns a retry strategy based on the RetryInfo

```go
type RetryPolicy func(RetryInfo) (continueRetry bool, sleep time.Duration)
```

<a name="Combine"></a>
### func Combine

```go
func Combine(policies ...RetryPolicy) RetryPolicy
```

Combine returns a RetryPolicy that combines multiple RetryPolicies. The function will return true if all the policies return true. \(logical AND\) If all the policies return true, the function will return the sum of the sleep durations.

Sleep formula: sleep1 \+ sleep2 \+ ...

<a name="Constant"></a>
### func Constant

```go
func Constant(interval time.Duration) RetryPolicy
```

Constant returns a RetryPolicy that always returns the same interval between retries.

Sleep formula: interval

<a name="Exponential"></a>
### func Exponential

```go
func Exponential(interval time.Duration) RetryPolicy
```

Exponential returns a RetryPolicy that increases the interval between retries exponentially.

Sleep formula: interval \* 2^fails

<a name="Jitter"></a>
### func Jitter

```go
func Jitter(interval time.Duration) RetryPolicy
```

Jitter returns a RetryPolicy that adds a random non\-negative jitter to the interval between retries.

Sleep formula: interval \+ rand.Int63n\(interval\)

<a name="LimitCount"></a>
### func LimitCount

```go
func LimitCount(count int) RetryPolicy
```

LimitCount returns a RetryPolicy that limits the number of retries.

Sleep formula: 0

<a name="LimitTime"></a>
### func LimitTime

```go
func LimitTime(limit time.Duration) RetryPolicy
```

LimitTime returns a RetryPolicy that limits the total time spent on retries.

Sleep formula: 0

WARNING: Use context.WithTimeout instead of this function if you can\!

<a name="Linear"></a>
### func Linear

```go
func Linear(interval time.Duration) RetryPolicy
```

Linear returns a RetryPolicy that increases the interval between retries linearly.

Sleep formula: interval \* fails

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
